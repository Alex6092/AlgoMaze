<!doctype html>
<html>
    <head>
        <title>Algomaze</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="../styles.css" type="text/css">

        <!-- CodeMirror CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">

        <script src="../common.js"></script>
        <script src="algomaze.js"></script>
        <!-- CodeMirror JS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>

        <style>
            
        </style>
    </head>

    <body>

        <header class="main-header">
            <h1>Bienvenue dans Algomaze</h1>
        </header>

        <div class="main-wrapper">
            <div class="left-container">
                <canvas id="maze" width="768" height="768"></canvas>
            </div>

            <div class="right-container">
                <div class="consigne-container"><h2>Consignes</h2>
                    <p>Votre robot doit allumer tous les interrupteurs et collecter l'ensemble des gemmes pour réussir ce niveau.<br/>
                        Pour contrôler le robot, vous disposez des instructions suivantes :<br/>
                        - moveForward() : Permet de faire avancer le robot dans la direction dans laquelle il regarde.<br/>
                        - turnLeft() : Permet de faire tourner le robot d'un quart de tour sur lui même dans le sens inverse des aiguilles d'une montre.<br/>
                        - toggleSwitch() : Permet d'inverser l'état d'un interrupteur. <br/>
                        - collectGem() : Permet de récupérer une gemme.<br/>
                        <br/>
                        Pour intéragir avec un interrupteur ou une gemme, le robot doit se trouver sur la case de l'élément interactif.
                    </p>
                </div>
                <div class="code-editor-container">
                    <h2>Editeur de code Javascript :</h2>
                    <textarea id="code-editor">// Votre solution ici ...</textarea>
                    <button id="run-button">Exécuter la solution</button>
                </div>
        </div>
            
        </div><!-- main wrapper -->

       
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                var editor = CodeMirror.fromTextArea(document.getElementById("code-editor"), {
                    lineNumbers: true,
                    mode: "javascript",
                    theme: "default"
                });

                document.getElementById("run-button").addEventListener("click", function() {
                    var code = editor.getValue();
                    try {
                        solve(code);
                    } catch (e) {
                        console.error(e);
                        alert('Error executing script: ' + e.message);
                    }
                });
            });
        </script>

    </body>
</html>